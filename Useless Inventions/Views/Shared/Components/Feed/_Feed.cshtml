@using Useless_Inventions.Models
@model FeedViewModel

<main class="feed-main">
    <div class="p-1 p-md-3" style="max-width: 600px; margin: 0 auto;">
        @if (User.Identity?.IsAuthenticated == true)
        {
            <div class="glass-card p-3 mb-4 border-0 shadow-sm rounded-4">
                <div class="card-body d-flex flex-column flex-md-row gap-3 align-items-start">
                    <img src="/images/avatar-placeholder.png" class="rounded-circle" width="40" height="40" alt="User" />
        
                    <form asp-action="Create" asp-controller="Inventions" method="post" class="w-100">
                        <div class="mb-2">
                            <input asp-for="NewInvention.Title" class="form-control form-control-sm mb-2" placeholder="What's it called?" maxlength="100" required />
                            <span asp-validation-for="NewInvention.Title" class="text-danger small"></span>
        
                            <textarea asp-for="NewInvention.Description" class="form-control form-control-sm mb-2" rows="2" placeholder="Describe your useless invention..." maxlength="500" required></textarea>
                            <span asp-validation-for="NewInvention.Description" class="text-danger small"></span>
        
                            <input asp-for="NewInvention.ImageUrl" class="form-control form-control-sm mb-2" placeholder="Image URL (optional)" />
                            <span asp-validation-for="NewInvention.ImageUrl" class="text-danger small"></span>
                        </div>
        
                        <div class="d-flex justify-content-end">
                            <button type="submit" class="btn glass-btn-mini btn-sm rounded-pill px-3">
                                <i class="bi bi-send me-1"></i> Share
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        }

        @if (Model.Posts != null)
        {
            foreach (var postModel in Model.Posts)
            {
                <div class="mb-3">
                    @await Html.PartialAsync("Components/Post/_PostCard", postModel)
                </div>
            }
        }
    </div>
</main>
@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
} 